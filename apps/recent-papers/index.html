<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Recent Papers</title>
<style>*{margin:0;padding:0;box-sizing:border-box}html,body{width:100%;height:100%;overflow:hidden}body{font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif}</style>
<script>(function(){if(window.__yaarCaptureInstalled)return;window.__yaarCaptureInstalled=!0;function o(r,e){window.parent.postMessage({type:"yaar:capture-response",requestId:r,imageData:e},"*")}function s(r,e){for(var t=r.querySelectorAll("*"),d=e.querySelectorAll("*"),c=0;c<t.length&&c<d.length;c++){var u=window.getComputedStyle(t[c]);d[c].setAttribute("style",u.cssText)}var n=window.getComputedStyle(r);e.setAttribute("style",n.cssText)}function a(r,e,t,d){var c=new Blob([r],{type:"image/svg+xml;charset=utf-8"}),u=URL.createObjectURL(c),n=new Image;n.onload=function(){var f=document.createElement("canvas");f.width=e,f.height=t;var i=f.getContext("2d");i.drawImage(n,0,0,e,t),URL.revokeObjectURL(u),d(f.toDataURL("image/png"))},n.onerror=function(){URL.revokeObjectURL(u),d(null)},n.src=u}window.addEventListener("message",function(r){if(!(!r.data||r.data.type!=="yaar:capture-request")){var e=r.data.requestId,t=null;try{var d=document.querySelectorAll("canvas");if(d.length>0){for(var c=null,u=0,n=0;n<d.length;n++){var f=d[n].width*d[n].height;f>u&&(u=f,c=d[n])}c&&(t=c.toDataURL("image/png"))}if(t){o(e,t);return}var i=document.querySelectorAll("svg");if(i.length>0){for(var c=null,u=0,n=0;n<i.length;n++){var l=i[n].getBoundingClientRect(),f=l.width*l.height;f>u&&(u=f,c=i[n])}if(c){var y=new XMLSerializer,w=y.serializeToString(c),l=c.getBoundingClientRect();a(w,l.width||300,l.height||150,function(j){o(e,j)});return}}var p=document.body;if(p){var g=Math.min(p.scrollWidth,window.innerWidth)||window.innerWidth||800,m=Math.min(p.scrollHeight,window.innerHeight)||window.innerHeight||600,h=p.cloneNode(!0);s(p,h);for(var v=h.querySelectorAll("script,iframe"),n=0;n<v.length;n++)v[n].remove();var q="http://www.w3.org/1999/xhtml",I="http://www.w3.org/2000/svg",b=new XMLSerializer().serializeToString(h),w='<svg xmlns="'+I+'" width="'+g+'" height="'+m+'"><foreignObject width="100%" height="100%"><body xmlns="'+q+'" style="margin:0;padding:0;">'+b+"</body></foreignObject></svg>";a(w,g,m,function(S){o(e,S)});return}}catch{}o(e,null)}})})(),function(){if(window.__yaarStorageInstalled)return;window.__yaarStorageInstalled=!0;function o(s){return s.split("/").map(encodeURIComponent).join("/")}window.yaar=window.yaar||{},window.yaar.storage={async save(s,a){var r;typeof a=="string"?r=a:a instanceof Blob?r=await a.arrayBuffer():a instanceof ArrayBuffer?r=a:a instanceof Uint8Array?r=a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength):r=String(a);var e=await fetch("/api/storage/"+o(s),{method:"POST",body:r});if(!e.ok){var t=await e.json().catch(function(){return{error:e.statusText}});throw new Error(t.error||"Save failed")}return e.json()},async read(s,a){var r=a&&a.as||"auto",e=await fetch("/api/storage/"+o(s));if(!e.ok){var t=await e.json().catch(function(){return{error:e.statusText}});throw new Error(t.error||"Read failed")}if(r==="blob")return e.blob();if(r==="arraybuffer")return e.arrayBuffer();if(r==="json")return e.json();if(r==="text")return e.text();var d=e.headers.get("content-type")||"";return d.includes("json")?e.json():d.startsWith("text/")?e.text():e.blob()},async list(s){var a=s?o(s):"",r=await fetch("/api/storage/"+a+"?list=true");if(!r.ok){var e=await r.json().catch(function(){return{error:r.statusText}});throw new Error(e.error||"List failed")}return r.json()},async remove(s){var a=await fetch("/api/storage/"+o(s),{method:"DELETE"});if(!a.ok){var r=await a.json().catch(function(){return{error:a.statusText}});throw new Error(r.error||"Delete failed")}return a.json()},url:function(s){return"/api/storage/"+o(s)}}}(),function(){if(!window.__yaarFetchProxyInstalled){window.__yaarFetchProxyInstalled=!0;var o=window.fetch.bind(window),s="";try{var a=new URLSearchParams(location.search),r=a.get("sessionId")||"";/^[a-zA-Z0-9_-]+$/.test(r)&&(s=r)}catch{}window.fetch=function(e,t){var d;if(e instanceof Request?d=e.url:d=String(e),d.startsWith("/")||d.startsWith("./")||d.startsWith("../"))return o(e,t);try{var c=new URL(d,location.origin);if(c.origin===location.origin)return o(e,t)}catch{return o(e,t)}var u=t&&t.method||(e instanceof Request?e.method:"GET"),n={};t&&t.headers?t.headers instanceof Headers?t.headers.forEach(function(i,l){n[l]=i}):Array.isArray(t.headers)?t.headers.forEach(function(i){n[i[0]]=i[1]}):n=Object.assign({},t.headers):e instanceof Request&&e.headers.forEach(function(i,l){n[l]=i});var f;return t&&t.body!=null?typeof t.body=="string"?f=Promise.resolve(t.body):f=new Response(t.body).text():e instanceof Request&&u!=="GET"&&u!=="HEAD"?f=e.text():f=Promise.resolve(void 0),f.then(function(i){var l={url:d,method:u,headers:n};return i!==void 0&&(l.body=i),s&&(l.sessionId=s),o("/api/fetch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})}).then(function(i){return i.ok?i.json():i.json().then(function(l){throw new Error(l.error||"Fetch proxy error: "+i.status)})}).then(function(i){var l;if(i.bodyEncoding==="base64"){for(var y=atob(i.body),w=new Uint8Array(y.length),p=0;p<y.length;p++)w[p]=y.charCodeAt(p);l=w.buffer}else l=i.body;return new Response(l,{status:i.status,statusText:i.statusText,headers:i.headers})})}}}(),function(){if(!window.__yaarAppProtocolInstalled){window.__yaarAppProtocolInstalled=!0,window.yaar=window.yaar||{};var o=null;window.yaar.app={register:function(s){o=s,window.parent.postMessage({type:"yaar:app-ready",appId:s.appId},"*")},sendInteraction:function(s){window.parent.postMessage({type:"yaar:app-interaction",content:typeof s=="string"?s:JSON.stringify(s)},"*")}},window.addEventListener("message",function(s){if(!(!s.data||!s.data.type)){var a=s.data,r=a.requestId;if(a.type==="yaar:app-manifest-request"){if(!o){window.parent.postMessage({type:"yaar:app-manifest-response",requestId:r,manifest:null,error:"No app registered"},"*");return}var e={appId:o.appId,name:o.name,state:{},commands:{}};if(o.state)for(var t in o.state){var d=o.state[t];e.state[t]={description:d.description},d.schema&&(e.state[t].schema=d.schema)}if(o.commands)for(var t in o.commands){var c=o.commands[t];e.commands[t]={description:c.description},c.params&&(e.commands[t].params=c.params),c.returns&&(e.commands[t].returns=c.returns)}window.parent.postMessage({type:"yaar:app-manifest-response",requestId:r,manifest:e},"*");return}if(a.type==="yaar:app-query-request"){if(!o||!o.state||!o.state[a.stateKey]){window.parent.postMessage({type:"yaar:app-query-response",requestId:r,data:null,error:"Unknown state key: "+a.stateKey},"*");return}try{var u=o.state[a.stateKey].handler();u&&typeof u.then=="function"?u.then(function(n){window.parent.postMessage({type:"yaar:app-query-response",requestId:r,data:n},"*")}).catch(function(n){window.parent.postMessage({type:"yaar:app-query-response",requestId:r,data:null,error:String(n)},"*")}):window.parent.postMessage({type:"yaar:app-query-response",requestId:r,data:u},"*")}catch(n){window.parent.postMessage({type:"yaar:app-query-response",requestId:r,data:null,error:String(n)},"*")}return}if(a.type==="yaar:app-command-request"){if(!o||!o.commands||!o.commands[a.command]){window.parent.postMessage({type:"yaar:app-command-response",requestId:r,result:null,error:"Unknown command: "+a.command},"*");return}try{var u=o.commands[a.command].handler(a.params);u&&typeof u.then=="function"?u.then(function(f){window.parent.postMessage({type:"yaar:app-command-response",requestId:r,result:f},"*")}).catch(function(f){window.parent.postMessage({type:"yaar:app-command-response",requestId:r,result:null,error:String(f)},"*")}):window.parent.postMessage({type:"yaar:app-command-response",requestId:r,result:u},"*")}catch(n){window.parent.postMessage({type:"yaar:app-command-response",requestId:r,result:null,error:String(n)},"*")}return}}})}}();</script>
</head>
<body>
<div id="app"></div>
<script type="module">
var _=`
  <style>
    :root {
      color-scheme: dark;
      --bg: #0f1117;
      --panel: #161a22;
      --muted: #9aa3b2;
      --text: #e7ecf3;
      --accent: #6ea8fe;
      --border: #2a3140;
      --good: #9ad08f;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
      overflow-y: auto;
    }
    .wrap { max-width: 980px; margin: 0 auto; padding: 16px; }
    .top { display:flex; gap:10px; align-items:center; flex-wrap: wrap; margin-bottom: 14px; }
    h1 { margin:0; font-size: 20px; }
    .spacer { flex:1; }
    .muted { color: var(--muted); font-size: 13px; }
    input, button, select {
      background: #202838; color: var(--text); border: 1px solid var(--border);
      border-radius: 10px; padding: 8px 10px; font: inherit;
    }
    button { cursor: pointer; }
    button:hover { border-color: #3b4660; }
    input { min-width: 270px; }
    .recommend-btn { border-color: #385995; }
    .recommend-box {
      margin-top: 10px;
      margin-bottom: 10px;
      padding: 10px 12px;
      border: 1px solid var(--border);
      border-radius: 12px;
      background: #141a25;
      display: none;
    }
    .recommend-title { margin: 0 0 8px; color: var(--good); font-size: 14px; }
    .recommend-item { margin: 0 0 8px; font-size: 13px; color: #d5deea; }
    .recommend-item:last-child { margin-bottom: 0; }
    .recommend-item a { color: var(--accent); text-decoration: none; }
    .recommend-item a:hover { text-decoration: underline; }
    .grid { display: grid; grid-template-columns: 1fr; gap: 12px; }
    .card { background: var(--panel); border: 1px solid var(--border); border-radius: 12px; overflow: hidden; }
    .card-inner { display: grid; grid-template-columns: 170px 1fr; gap: 12px; }
    .thumb { width: 100%; height: 100%; min-height: 130px; object-fit: cover; background: #11151f; }
    .content { padding: 12px 14px 14px 0; }
    .title { margin: 0 0 8px; font-size: 17px; line-height: 1.3; }
    .title a { color: var(--text); text-decoration: none; }
    .title a:hover { color: var(--accent); text-decoration: underline; }
    .meta { display:flex; gap:10px; flex-wrap:wrap; color: var(--muted); font-size: 12px; margin-bottom: 8px; }
    .summary { margin: 0; color: #cdd6e3; font-size: 14px; line-height: 1.45; }
    .links { margin-top: 10px; display:flex; gap:10px; flex-wrap: wrap; }
    .links a { color: var(--accent); font-size: 13px; text-decoration: none; }
    .links a:hover { text-decoration: underline; }
    .tag { display:inline-block; padding:2px 8px; border:1px solid var(--border); border-radius:99px; font-size:11px; }
    .empty { padding: 24px; text-align:center; border: 1px dashed var(--border); border-radius: 12px; color: var(--muted); }
    @media (max-width: 760px) {
      .card-inner { grid-template-columns: 1fr; }
      .content { padding: 0 12px 12px 12px; }
      .thumb { min-height: 180px; }
      input { min-width: 100%; }
    }
  </style>
  <div class="wrap">
    <div class="top">
      <h1>\u{1F4DA} Recent Papers</h1>
      <span class="muted">Sources: Hugging Face + arXiv</span>
      <div class="spacer"></div>

      <label class="muted" for="sourceMode">Source</label>
      <select id="sourceMode">
        <option value="huggingface" selected>Hugging Face</option>
        <option value="arxiv">arXiv</option>
        <option value="both">Both</option>
      </select>

      <label class="muted" for="limit">Limit</label>
      <select id="limit">
        <option value="10">10</option>
        <option value="20" selected>20</option>
        <option value="40">40</option>
      </select>

      <label class="muted" for="dayRange">Days</label>
      <select id="dayRange">
        <option value="all" selected>All</option>
        <option value="1">1 day</option>
        <option value="3">3 days</option>
        <option value="7">7 days</option>
        <option value="14">14 days</option>
        <option value="30">30 days</option>
      </select>

      <label class="muted" for="sortBy">Sort</label>
      <select id="sortBy">
        <option value="newest" selected>Newest</option>
        <option value="oldest">Oldest</option>
        <option value="vote">Most votes</option>
        <option value="comments">Most comments</option>
        <option value="title">Title (A\u2192Z)</option>
      </select>

      <input id="arxivQuery" value="cat:cs.AI OR cat:cs.LG" placeholder="arXiv query (e.g. all:transformer OR cat:cs.AI)" />

      <button id="recommend2" class="recommend-btn">Recommend 2 papers</button>
      <button id="refresh">Refresh</button>
    </div>
    <div id="status" class="muted">Loading\u2026</div>
    <div id="recommendations" class="recommend-box"></div>
    <div id="list" class="grid" style="margin-top:10px"></div>
  </div>
`;function j(e){if(!e)return"Unknown date";let t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleString()}function s(e){return e.source||"huggingface"}function b(e){return e?.paper?.publishedAt||e?.publishedAt}function d(e){let t=b(e);if(!t)return 0;let r=new Date(t).getTime();return Number.isFinite(r)?r:0}function y(e){let t=e?.paper?.upvotes??e?.upvotes??0;return Number.isFinite(t)?t:0}function l(e){let t=e?.numComments??0;return Number.isFinite(t)?t:0}function f(e){return e?.paper?.id||e?.id||"unknown"}function h(e){return e?.paper?.title||e?.title||"Untitled paper"}function A(e){return e?.paper?.ai_summary||e?.summary||e?.paper?.summary||"No summary available."}function P(e){return e?.arxiv?.absUrl?e.arxiv.absUrl:`https://arxiv.org/abs/${f(e)}`}function R(e){return String(e||"").replace(/\s+/g," ").trim()}function q(e){let t=String(e||"").trim();return t?t.match(/\/abs\/(.+)$/)?.[1]||t:""}function v(e,t){let r=e.getElementsByTagName(t)[0];return R(r?.textContent||"")}function O(e){return e==="vote"?"trending":"publishedAt"}async function X(e,t,r){let n=R(t||"cat:cs.AI OR cat:cs.LG")||"cat:cs.AI OR cat:cs.LG",o=r==="newest"?"submittedDate":"lastUpdatedDate",i=r==="oldest"?"ascending":"descending",x=`https://export.arxiv.org/api/query?search_query=${encodeURIComponent(n)}&start=0&max_results=${Math.max(1,e)}&sortBy=${o}&sortOrder=${i}`,g=await fetch(x);if(!g.ok)throw new Error(`arXiv HTTP ${g.status}`);let D=await g.text(),$=new DOMParser().parseFromString(D,"application/xml");if($.querySelector("parsererror"))throw new Error("arXiv feed parse error");return Array.from($.getElementsByTagName("entry")).map(p=>{let z=v(p,"id"),H=q(z),te=v(p,"title"),re=v(p,"summary"),ae=v(p,"published")||v(p,"updated"),ne=Array.from(p.getElementsByTagName("author")).map(B=>v(B,"name")).filter(Boolean),oe=Array.from(p.getElementsByTagName("link")).find(B=>B.getAttribute("title")==="pdf")?.getAttribute("href")||"",ie=(p.getElementsByTagName("arxiv:primary_category")[0]||p.getElementsByTagName("primary_category")[0])?.getAttribute("term")||"";return{source:"arxiv",id:H,title:te,summary:re,publishedAt:ae,upvotes:0,numComments:0,arxiv:{absUrl:z||`https://arxiv.org/abs/${H}`,pdfUrl:oe||`https://arxiv.org/pdf/${H}.pdf`,primaryCategory:ie,authors:ne}}})}async function Q(e,t){let r=O(t),a=await fetch(`https://huggingface.co/api/daily_papers?limit=${e}&sort=${r}`);if(!a.ok)throw new Error(`HF HTTP ${a.status}`);let n=await a.json();return(Array.isArray(n)?n:[]).map(o=>({...o,source:"huggingface"}))}async function N(e,t){let r=String(e||"").trim();if(!r)throw new Error("Missing paper id");if(t[r])return t[r];let a=await fetch(`https://huggingface.co/api/papers/${encodeURIComponent(r)}`);if(!a.ok)throw new Error(`HTTP ${a.status}`);let n=await a.json(),o={id:n?.id||r,title:n?.title||"",summary:n?.summary||"",aiSummary:n?.ai_summary||"",keywords:Array.isArray(n?.ai_keywords)?n.ai_keywords:[],authors:Array.isArray(n?.authors)?n.authors.map(i=>i?.name).filter(Boolean):[],upvotes:Number(n?.upvotes||0),publishedAt:n?.publishedAt||"",projectPage:n?.projectPage||"",githubRepo:n?.githubRepo||"",githubStars:Number(n?.githubStars||0),links:{huggingFace:`https://huggingface.co/papers/${n?.id||r}`,arxiv:`https://arxiv.org/abs/${n?.id||r}`}};return t[r]=o,o}function se(e,t){if(!t.length){e.style.display="none",e.innerHTML="";return}e.style.display="block",e.innerHTML=`
    <h3 class="recommend-title">\u{1F916} Today's 2 recommended papers</h3>
    ${t.map((r,a)=>`
      <p class="recommend-item">
        <strong>${a+1}.</strong>
        <a href="${r.url||`https://arxiv.org/abs/${r.id}`}" target="_blank" rel="noreferrer">${r.title}</a>
        \u2014 ${r.reason} (\u{1F44D} ${r.upvotes}, \u{1F4AC} ${r.comments})
      </p>
    `).join("")}
  `}function Z(e){let t=s(e),r=f(e),a=h(e),n=A(e),o=b(e),i=e?.organization?.fullname||e?.organization?.name||e?.arxiv?.primaryCategory,x=l(e),g=y(e);return`
    <article class="card">
      <div class="card-inner">
        <img class="thumb" src="${t==="huggingface"?e?.thumbnail||"https://huggingface.co/front/assets/huggingface_logo-noborder.svg":"https://static.arxiv.org/static/browse/0.3.4/images/arxiv-logo-one-color-white.svg"}" alt="thumbnail for ${a.replace(/"/g,"&quot;")}" loading="lazy" />
        <div class="content">
          <h2 class="title"><a href="${P(e)}" target="_blank" rel="noreferrer">${a}</a></h2>
          <div class="meta">
            <span class="tag">${t==="huggingface"?"Hugging Face":"arXiv"}</span>
            <span>\u{1F5D3} ${j(o)}</span>
            <span>\u{1F44D} ${g}</span>
            <span>\u{1F4AC} ${x} comments</span>
            ${i?`<span>\u{1F3F7} ${i}</span>`:""}
          </div>
          <p class="summary">${n}</p>
          <div class="links">
            ${t==="huggingface"?`<a href="https://huggingface.co/papers/${r}" target="_blank" rel="noreferrer">Hugging Face</a>`:""}
            <a href="${P(e)}" target="_blank" rel="noreferrer">arXiv</a>
            ${e?.arxiv?.pdfUrl?`<a href="${e.arxiv.pdfUrl}" target="_blank" rel="noreferrer">PDF</a>`:""}
          </div>
        </div>
      </div>
    </article>
  `}function G(e,t){return t.length?`
    <section style="margin-top: 12px;">
      <h3 style="margin: 0 0 10px; font-size: 15px; color: #cfd8e6;">${e} (${t.length})</h3>
      <div class="grid">${t.map(r=>Z(r)).join("")}</div>
    </section>
  `:`
      <section style="margin-top: 12px;">
        <h3 style="margin: 0 0 10px; font-size: 15px; color: #cfd8e6;">${e} (0)</h3>
        <div class="empty">No papers available for this source.</div>
      </section>
    `}function J({statusEl:e,listEl:t,recommendBoxEl:r,papers:a,sourcePapers:n,recommendations:o,loading:i,sourceMode:x}){let g=a.filter(c=>s(c)==="huggingface").length,D=a.filter(c=>s(c)==="arxiv").length;if(e.textContent=i?"Loading papers...":`Showing ${a.length} of ${n.length} papers (HF ${g} \u2022 arXiv ${D}) \u2022 Last updated ${new Date().toLocaleTimeString()}`,se(r,o),!a.length){t.innerHTML='<div class="empty">No papers available for this filter.</div>';return}if(x==="both"){let c=a.filter(E=>s(E)==="huggingface"),$=a.filter(E=>s(E)==="arxiv");t.innerHTML=`${G("Hugging Face Papers",c)}${G("arXiv Papers",$)}`;return}t.innerHTML=`<div class="grid">${a.map(c=>Z(c)).join("")}</div>`}var W=document.createElement("div");W.innerHTML=_;document.body.appendChild(W);var Y=document.getElementById("status"),pe=document.getElementById("list"),M=document.getElementById("sourceMode"),k=document.getElementById("limit"),F=document.getElementById("dayRange"),w=document.getElementById("sortBy"),U=document.getElementById("arxivQuery"),le=document.getElementById("recommendations"),ce=document.getElementById("recommend2"),de=document.getElementById("refresh"),I=[],m=[],T=[],C={},S=!1;function V(){let e=F.value,t=w.value,r=[...I];if(e!=="all"){let a=Number(e);if(Number.isFinite(a)&&a>0){let n=Date.now()-a*24*60*60*1e3;r=r.filter(o=>d(o)>=n)}}t==="newest"?r.sort((a,n)=>d(n)-d(a)):t==="oldest"?r.sort((a,n)=>d(a)-d(n)):t==="vote"?r.sort((a,n)=>{let o=y(n)-y(a);if(o!==0)return o;let i=l(n)-l(a);return i!==0?i:d(n)-d(a)}):t==="comments"?r.sort((a,n)=>l(n)-l(a)):t==="title"&&r.sort((a,n)=>h(a).localeCompare(h(n))),m=r}function L(){J({statusEl:Y,listEl:pe,recommendBoxEl:le,papers:m,sourcePapers:I,recommendations:T,loading:S,sourceMode:M.value})}async function u(){if(!S){S=!0,L();try{let e=Number(k.value||20),t=M.value,r=[],a=[];if(t==="huggingface"||t==="both"){let n=t==="both"?Math.ceil(e/2):e;r=await Q(n,w.value)}if(t==="arxiv"||t==="both"){let n=t==="both"?Math.floor(e/2)||1:e;a=await X(n,U.value,w.value)}I=[...r,...a],V()}catch(e){I=[],m=[],Y.textContent=`Failed to load papers: ${e?.message||String(e)}`}finally{S=!1,L()}}}function me(){V(),L()}function ee(e){let t={event:"recent-papers:recommend-2",source:e,date:new Date().toISOString(),context:{mode:M.value,arxivQuery:U.value,limit:Number(k.value||20),dayRange:F.value,sortBy:w.value,visibleCount:m.length},papers:m.slice(0,Math.max(1,Number(k.value||20))).map(r=>({id:f(r),title:h(r),source:s(r),summary:r?.summary||r?.paper?.summary||"",aiSummary:r?.paper?.ai_summary||"",upvotes:y(r),comments:l(r),publishedAt:b(r),authors:s(r)==="arxiv"?r?.arxiv?.authors||[]:(r?.paper?.authors||[]).map(a=>a?.name).filter(Boolean),links:{huggingFace:`https://huggingface.co/papers/${f(r)}`,arxiv:P(r)}}))};window.yaar?.app?.sendInteraction?.(t)}de.addEventListener("click",()=>u());M.addEventListener("change",()=>u());k.addEventListener("change",()=>u());F.addEventListener("change",()=>me());w.addEventListener("change",async()=>u());U.addEventListener("keydown",e=>{e.key==="Enter"&&u()});ce.addEventListener("click",()=>ee("button"));u();var K=window.yaar?.app;K&&K.register({appId:"recent-papers",name:"Recent Papers",state:{papers:{description:"Current filtered paper list loaded in the UI",handler:()=>m.map(e=>({id:f(e),source:s(e),title:h(e),summary:A(e),upvotes:y(e),comments:l(e)}))},recommendations:{description:"Current recommended papers",handler:()=>T},paperDetailsCache:{description:"Cached detailed paper data fetched by paper id",handler:()=>C}},commands:{refresh:{description:"Reload papers from selected sources",params:{type:"object",properties:{}},handler:async()=>(await u(),{ok:!0,count:m.length})},recommendTop2Today:{description:"Ask the AI agent to recommend 2 papers from current context",params:{type:"object",properties:{}},handler:async()=>(I.length||await u(),ee("app-command"),{ok:!0,queued:!0,candidateCount:m.length})},fetchPaperDetails:{description:"Fetch detailed summary/content metadata for one Hugging Face paper by id",params:{type:"object",properties:{id:{type:"string"}},required:["id"]},handler:async e=>({ok:!0,detail:await N(e.id,C)})},fetchPaperDetailsBatch:{description:"Fetch detailed summary/content metadata for multiple Hugging Face paper ids",params:{type:"object",properties:{ids:{type:"array",items:{type:"string"}}},required:["ids"]},handler:async e=>{let t=Array.isArray(e.ids)?e.ids.filter(Boolean).slice(0,20):[],r=[];for(let a of t)try{r.push(await N(a,C))}catch(n){r.push({id:a,error:n?.message||String(n)})}return{ok:!0,count:r.length,details:r}}},setRecommendations:{description:"Set AI-generated recommendations to display in the UI",params:{type:"object",properties:{recommendations:{type:"array",items:{type:"object",properties:{id:{type:"string"},title:{type:"string"},reason:{type:"string"},upvotes:{type:"number"},comments:{type:"number"},source:{type:"string"},url:{type:"string"}},required:["id","title","reason"]}}},required:["recommendations"]},handler:async e=>(T=(e.recommendations||[]).slice(0,2).map(t=>({id:String(t.id||""),title:String(t.title||"Untitled paper"),reason:String(t.reason||""),upvotes:Number(t.upvotes||0),comments:Number(t.comments||0),source:t.source||"arxiv",url:String(t.url||"")})),L(),{ok:!0,count:T.length})}}});

</script>
</body>
</html>